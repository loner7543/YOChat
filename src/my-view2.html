<!--
@license
Copyright (c) 2016 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->
<script src="https://www.gstatic.com/firebasejs/4.0.0/firebase.js"></script>
<script>
    // Initialize Firebase
    var config = {
        apiKey: "AIzaSyD7DL-pSHSivgS-HYEYRs_IUjYcDAnXxwg",
        authDomain: "yochat-aa55e.firebaseapp.com",
        databaseURL: "https://yochat-aa55e.firebaseio.com",
        projectId: "yochat-aa55e",
        storageBucket: "yochat-aa55e.appspot.com",
        messagingSenderId: "452198832439"
    };
    firebase.initializeApp(config);
</script>
<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="shared-styles.html">
<link rel="import" href="../bower_components/paper-fab/paper-fab.html">
<link rel="import" href="../bower_components/paper-button/paper-button.html">
<script type="text/javascript" src="js/network.js"></script>

<dom-module id="my-view2">
  <template>
    <style include="shared-styles">
      :host {
        display: block;

        padding: 10px;
      }
    </style>

    <div class="card">
      <paper-fab style="color:#00c853;" id="add" label="Yo!" on-click="getData"></paper-fab></div>
    <!--<template is="dom-repeat" items="{{items}}">-->
      <!--<div class="txt">-->
        <!--<span class="time">{{getDate(index)}}</span> <b style$="[[getColor(index)]]">{{getName(index)}}</b>:Yo!-->
      <!--</div>-->
    <!--</template>-->
    <paper-button label="get" on-click="getData"></paper-button>
  </template>

  <script>
    Polymer({
      is: 'my-view2',
        properties:{
            user:{
                type:Object,
                value(){
                    return {
                        name:"",
                        server:""
                    }
                }
            },
            last:{
                type:Number,
                value: +new Date()
            },
            items:{
                type:Array,
                value(){
                    return [];
                },
                notify:true,
            },
        },
        loadFile:function (e) {
            console.log(e);
            console.log("send data.....")
            var data = {
                mes:"lala",
                date:"112"
            }
            sendMessaage(data,"ws://"+host+":"+serverPort+"/ws");
//            var data = getAll("http://localhost:8085/api/msg?from="+this.last);
//            console.log(data);
        },
        getData:function (e) {
          var db = firebase.database().ref().child("Messages");
            db.once("value")
                .then(function(snapshot) {
                    var cond = snapshot.hasChildren();//lima
                    if (cond){
                        var date = snapshot.child("mes1").child("date").val(); // {first:"Ada",last:"Lovelace"}
                        var user = snapshot.child("mes1").child("user").val(); // "Lovelace"
                    }
                });
          var a = 5;
           // sendMessaage(null,"ws://"+host+":"+serverPort+"/api/msg?from="+this.last);
        }

    });
  </script>
</dom-module>
